<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Sidebar React - Klube Cash</title>
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- CSS da Sidebar -->
    <link rel="stylesheet" href="Sidebar.css">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
        }
        
        .test-content {
            padding: 40px;
            transition: margin-left 0.3s ease;
        }
        
        .test-header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            color: #1f2937;
            margin: 0 0 10px 0;
            font-size: 28px;
        }
        
        .test-header p {
            color: #6b7280;
            margin: 0;
            font-size: 16px;
        }
        
        .test-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .test-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .test-card h3 {
            color: #1f2937;
            margin: 0 0 12px 0;
            font-size: 18px;
        }
        
        .test-card p {
            color: #6b7280;
            margin: 0 0 16px 0;
            line-height: 1.5;
        }
        
        .test-button {
            background: #F1780C;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .test-button:hover {
            background: #e06a0b;
            transform: translateY(-1px);
        }
        
        .test-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .test-content {
                padding: 20px;
                margin-left: 0 !important;
            }
            
            .test-header {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .test-header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Container para o React -->
    <div id="sidebar-root"></div>
    
    <!-- Conte√∫do de teste -->
    <div class="test-content main-content">
        <div class="test-info">
            <strong>üß™ P√°gina de Teste da Sidebar React</strong><br>
            Esta √© uma demonstra√ß√£o da sidebar React funcionando. Experimente:
            <ul style="margin: 8px 0 0 0; padding-left: 20px;">
                <li>Clicar no bot√£o de colapsar (desktop)</li>
                <li>Usar o menu mobile (toque no ‚ò∞)</li>
                <li>Redimensionar a janela</li>
                <li>Usar Ctrl+B para colapsar (desktop)</li>
            </ul>
        </div>
        
        <div class="test-header">
            <h1>Dashboard da Loja</h1>
            <p>Bem-vindo ao sistema Klube Cash - Vers√£o React</p>
        </div>
        
        <div class="test-cards">
            <div class="test-card">
                <h3>üìä Vendas do Dia</h3>
                <p>Acompanhe as vendas realizadas hoje pela sua loja.</p>
                <button class="test-button">Ver Relat√≥rio</button>
            </div>
            
            <div class="test-card">
                <h3>üí∞ Comiss√µes</h3>
                <p>Gerencie as comiss√µes pendentes e pagamentos realizados.</p>
                <button class="test-button">Gerenciar</button>
            </div>
            
            <div class="test-card">
                <h3>üë• Funcion√°rios</h3>
                <p>Cadastre e gerencie os funcion√°rios da sua loja.</p>
                <button class="test-button">Ver Funcion√°rios</button>
            </div>
            
            <div class="test-card">
                <h3>‚öôÔ∏è Configura√ß√µes</h3>
                <p>Ajuste as configura√ß√µes da sua loja e perfil.</p>
                <button class="test-button">Configurar</button>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        const Sidebar = ({ activeMenu = 'dashboard', userName = 'Jo√£o Silva' }) => {
          const [isCollapsed, setIsCollapsed] = useState(() => 
            localStorage.getItem('klubeSidebarCollapsed') === 'true'
          );
          const [isMobileOpen, setIsMobileOpen] = useState(false);

          // Calcular iniciais do usu√°rio
          const getInitials = (name) => {
            const nameParts = name.split(' ');
            if (nameParts.length >= 2) {
              return (nameParts[0][0] + nameParts[1][0]).toUpperCase();
            }
            return name.substring(0, 2).toUpperCase();
          };

          // Menu items
          const menuItems = [
            {
              id: 'dashboard',
              title: 'Dashboard',
              url: '#dashboard',
              icon: (
                <>
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"/>
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"/>
                </>
              )
            },
            {
              id: 'register-transaction',
              title: 'Nova Venda',
              url: '#nova-venda',
              icon: React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: '2',
                d: 'M12 6v6m0 0v6m0-6h6m-6 0H6'
              })
            },
            {
              id: 'funcionarios',
              title: 'Funcion√°rios',
              url: '#funcionarios',
              icon: React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: '2',
                d: 'M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z'
              })
            },
            {
              id: 'payment-history',
              title: 'Pagamentos',
              url: '#pagamentos',
              badge: 3,
              icon: React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: '2',
                d: 'M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z'
              })
            },
            {
              id: 'saldos',
              title: 'Pendentes de Pagamento',
              url: '#pendentes',
              icon: React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: '2',
                d: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1'
              })
            },
            {
              id: 'profile',
              title: 'Perfil',
              url: '#perfil',
              icon: React.createElement('path', {
                strokeLinecap: 'round',
                strokeLinejoin: 'round',
                strokeWidth: '2',
                d: 'M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'
              })
            }
          ];

          const isMobile = useCallback(() => window.innerWidth <= 768, []);

          const adjustMainContent = useCallback(() => {
            setTimeout(() => {
              const mainContent = document.querySelector('.main-content, .content, .page-content, main');
              if (mainContent) {
                if (isMobile()) {
                  mainContent.style.marginLeft = '0';
                  mainContent.style.paddingLeft = '0';
                } else {
                  const sidebarWidth = isCollapsed ? '80px' : '280px';
                  mainContent.style.marginLeft = sidebarWidth;
                  mainContent.style.paddingLeft = '0';
                  mainContent.style.transition = 'margin-left 0.3s ease';
                }
                mainContent.classList.add('klube-main-adjusted');
              }
            }, 50);
          }, [isCollapsed]);

          const toggleDesktop = () => {
            if (isMobile()) return;
            const newCollapsed = !isCollapsed;
            setIsCollapsed(newCollapsed);
            localStorage.setItem('klubeSidebarCollapsed', newCollapsed);
          };

          const toggleMobile = () => {
            if (!isMobile()) return;
            setIsMobileOpen(!isMobileOpen);
          };

          const closeMobile = () => {
            if (!isMobile()) return;
            setIsMobileOpen(false);
          };

          const handleLogout = () => {
            if (confirm('Tem certeza que deseja sair?')) {
              alert('Logout realizado! (Esta √© apenas uma demonstra√ß√£o)');
            }
          };

          // Effects
          useEffect(() => {
            adjustMainContent();
          }, [adjustMainContent]);

          useEffect(() => {
            const handleResize = () => {
              if (isMobile()) {
                setIsMobileOpen(false);
              }
              adjustMainContent();
            };

            const handleKeyDown = (e) => {
              if (e.ctrlKey && e.key === 'b' && !isMobile()) {
                e.preventDefault();
                toggleDesktop();
              }
              if (e.key === 'Escape' && isMobile() && isMobileOpen) {
                closeMobile();
              }
            };

            const handleClickOutside = (e) => {
              const sidebar = document.getElementById('klubeSidebar');
              const mobileToggle = document.getElementById('klubeMobileToggle');
              
              if (isMobile() && isMobileOpen && 
                  sidebar && !sidebar.contains(e.target) && 
                  mobileToggle && !mobileToggle.contains(e.target)) {
                closeMobile();
              }
            };

            window.addEventListener('resize', handleResize);
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('click', handleClickOutside);

            return () => {
              window.removeEventListener('resize', handleResize);
              document.removeEventListener('keydown', handleKeyDown);
              document.removeEventListener('click', handleClickOutside);
            };
          }, [isMobileOpen]);

          useEffect(() => {
            if (isMobileOpen) {
              document.body.classList.add('klube-mobile-menu-open');
            } else {
              document.body.classList.remove('klube-mobile-menu-open');
            }

            return () => {
              document.body.classList.remove('klube-mobile-menu-open');
            };
          }, [isMobileOpen]);

          return React.createElement(React.Fragment, null,
            // Mobile Toggle
            React.createElement('button', {
              className: 'klube-mobile-toggle',
              id: 'klubeMobileToggle',
              onClick: toggleMobile,
              'aria-label': 'Abrir menu'
            },
              React.createElement('svg', {
                width: '20',
                height: '20',
                viewBox: '0 0 24 24',
                fill: 'none',
                stroke: 'currentColor',
                strokeWidth: '2'
              },
                React.createElement('line', { x1: '3', y1: '6', x2: '21', y2: '6' }),
                React.createElement('line', { x1: '3', y1: '12', x2: '21', y2: '12' }),
                React.createElement('line', { x1: '3', y1: '18', x2: '21', y2: '18' })
              )
            ),

            // Overlay
            React.createElement('div', {
              className: `klube-overlay ${isMobileOpen ? 'active' : ''}`,
              onClick: closeMobile
            }),

            // Sidebar
            React.createElement('aside', {
              className: `klube-sidebar ${isCollapsed ? 'collapsed' : ''} ${isMobileOpen ? 'mobile-open' : ''}`,
              id: 'klubeSidebar'
            },
              // Header
              React.createElement('header', { className: 'klube-sidebar-header' },
                React.createElement('div', { className: 'klube-logo-container' },
                  React.createElement('img', {
                    src: 'https://via.placeholder.com/40x40/F1780C/FFFFFF?text=KC',
                    alt: 'Klube Cash',
                    className: 'klube-logo'
                  }),
                  React.createElement('span', { className: 'klube-logo-text' }, 'Klube Cash')
                ),
                React.createElement('button', {
                  className: 'klube-collapse-btn',
                  onClick: toggleDesktop,
                  'aria-label': 'Recolher menu'
                },
                  React.createElement('svg', {
                    width: '18',
                    height: '18',
                    viewBox: '0 0 24 24',
                    fill: 'none',
                    stroke: 'currentColor',
                    strokeWidth: '2'
                  },
                    React.createElement('polyline', { points: '15,18 9,12 15,6' })
                  )
                )
              ),

              // User Profile
              React.createElement('div', { className: 'klube-user-profile' },
                React.createElement('div', { className: 'klube-avatar' }, getInitials(userName)),
                React.createElement('div', { className: 'klube-user-info' },
                  React.createElement('div', { className: 'klube-user-name' }, userName),
                  React.createElement('div', { className: 'klube-user-role' },
                    React.createElement('svg', {
                      width: '12',
                      height: '12',
                      viewBox: '0 0 24 24',
                      fill: 'none',
                      stroke: 'currentColor',
                      strokeWidth: '2'
                    },
                      React.createElement('path', {
                        d: 'M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4'
                      })
                    ),
                    'Lojista'
                  )
                )
              ),

              // Navigation
              React.createElement('nav', { className: 'klube-nav', role: 'navigation' },
                React.createElement('div', { className: 'klube-nav-section' },
                  React.createElement('h3', { className: 'klube-section-title' }, 'Menu Principal'),
                  React.createElement('ul', { className: 'klube-menu' },
                    menuItems.map((item) =>
                      React.createElement('li', { key: item.id, className: 'klube-menu-item' },
                        React.createElement('a', {
                          href: item.url,
                          className: `klube-menu-link ${activeMenu === item.id ? 'active' : ''}`,
                          'data-page': item.id,
                          'aria-current': activeMenu === item.id ? 'page' : 'false',
                          onClick: (e) => { e.preventDefault(); console.log('Clicked:', item.title); }
                        },
                          React.createElement('span', { className: 'klube-menu-icon' },
                            React.createElement('svg', {
                              width: '20',
                              height: '20',
                              viewBox: '0 0 24 24',
                              fill: 'none',
                              stroke: 'currentColor',
                              strokeWidth: '2'
                            }, item.icon)
                          ),
                          React.createElement('span', { className: 'klube-menu-text' }, item.title),
                          item.badge && item.badge > 0 &&
                            React.createElement('span', { className: 'klube-badge' }, item.badge),
                          React.createElement('span', { className: 'klube-tooltip' }, item.title)
                        )
                      )
                    )
                  )
                )
              ),

              // Footer
              React.createElement('footer', { className: 'klube-sidebar-footer' },
                React.createElement('button', {
                  className: 'klube-logout-btn',
                  onClick: handleLogout
                },
                  React.createElement('svg', {
                    className: 'klube-logout-icon',
                    viewBox: '0 0 24 24',
                    fill: 'none',
                    stroke: 'currentColor',
                    strokeWidth: '2'
                  },
                    React.createElement('path', {
                      d: 'M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4m7 14l5-5-5-5m5 5H9'
                    })
                  ),
                  React.createElement('span', { className: 'klube-logout-text' }, 'Sair')
                )
              )
            )
          );
        };

        // Renderizar o componente
        ReactDOM.render(
          React.createElement(Sidebar, { 
            activeMenu: 'dashboard', 
            userName: 'Jo√£o Silva' 
          }),
          document.getElementById('sidebar-root')
        );
    </script>
</body>
</html>